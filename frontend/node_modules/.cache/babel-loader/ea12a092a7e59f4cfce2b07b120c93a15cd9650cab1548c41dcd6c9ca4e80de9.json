{"ast":null,"code":"import _slicedToArray from\"/Users/unmesh/Desktop/295B/avrs-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link}from'react-router-dom';import{useParams}from'react-router-dom';import Header from'./Header';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CameraFeed=function CameraFeed(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stream=_useState2[0],setStream=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){var constraints={video:true};var success=function success(stream){setStream(stream);};var failure=function failure(error){setError(true);console.error(error);};navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);return function(){if(stream){stream.getTracks().forEach(function(track){return track.stop();});}};},[]);var Object=function Object(_ref){var type=_ref.type,message=_ref.message,time=_ref.time;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-right py-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:type}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-2 text-gray-600\",children:message}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-2 text-gray-600\",children:time})]});};var Objects=function Objects(_ref2){var notifications=_ref2.notifications;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 rounded-md shadow-lg p-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold mb-4\",children:\"Detected Objects\"})});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{title:\"Camera feed\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center\",children:[error?/*#__PURE__*/_jsx(\"p\",{children:\"Video not available\"}):/*#__PURE__*/_jsx(\"video\",{width:\"640\",height:\"480\",style:{maxWidth:\"100%\",maxHeight:\"100%\",objectFit:\"contain\"},controls:true,autoPlay:true,playsInline:true,muted:true,ref:function ref(video){if(video&&stream){video.srcObject=stream;}}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full md:w-1/3 px-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Objects,{})})})]})]});};export default CameraFeed;","map":{"version":3,"names":["React","Link","useParams","Header","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CameraFeed","_useState","_useState2","_slicedToArray","stream","setStream","_useState3","_useState4","error","setError","constraints","video","success","failure","console","navigator","mediaDevices","getUserMedia","then","catch","getTracks","forEach","track","stop","Object","_ref","type","message","time","className","children","Objects","_ref2","notifications","title","width","height","style","maxWidth","maxHeight","objectFit","controls","autoPlay","playsInline","muted","ref","srcObject"],"sources":["/Users/unmesh/Desktop/295B/avrs-dashboard/src/components/CameraFeed.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport Header from './Header';\n\nimport { useState, useEffect } from 'react';\n\nconst CameraFeed = () => {\n    const [stream, setStream] = useState(null);\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        const constraints = {\n            video: true,\n        };\n\n        const success = (stream) => {\n            setStream(stream);\n        };\n\n        const failure = (error) => {\n            setError(true);\n            console.error(error);\n        };\n\n        navigator.mediaDevices\n            .getUserMedia(constraints)\n            .then(success)\n            .catch(failure);\n\n        return () => {\n            if (stream) {\n                stream.getTracks().forEach((track) => track.stop());\n            }\n        };\n    }, []);\n\n    const Object = ({ type, message, time }) => (\n        <div className=\"flex justify-right py-1\">\n            <p className=\"font-bold\">{type}</p>\n            <p className=\"ml-2 text-gray-600\">{message}</p>\n            <p className=\"ml-2 text-gray-600\">{time}</p>\n        </div>\n    );\n\n    const Objects = ({ notifications }) => (\n        <div className=\"bg-gray-100 rounded-md shadow-lg p-4\">\n            <h2 className=\"font-bold mb-4\">Detected Objects</h2>\n            {/*  <div>\n                {notifications.map((notification) => (\n                    <Notification key={notification.type} type={notification.type} message={notification.message} time={notification.time} />\n                ))}\n            </div> */}\n        </div>\n    );\n    return (\n        <div>\n            <Header title={`Camera feed`} />\n            <div className='flex justify-center items-center'>\n                {error ? (\n                    <p>Video not available</p>\n                ) : (\n\n                    <video\n                        width=\"640\"\n                        height=\"480\"\n                        style={{ maxWidth: \"100%\", maxHeight: \"100%\", objectFit: \"contain\" }}\n                        controls\n                        autoPlay\n                        playsInline\n                        muted\n                        ref={(video) => {\n                            if (video && stream) {\n                                video.srcObject = stream;\n                            }\n                        }}\n                    />\n\n\n                )}\n\n                <div className=\"w-full md:w-1/3 px-2\">\n                    <div className=\"mb-4\">\n                        <Objects />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CameraFeed;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}